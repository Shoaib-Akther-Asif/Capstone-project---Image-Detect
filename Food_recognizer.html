---
title: Cap Recognizer
layout: page
---

<input id="photo" type="file">
<div id="results"></div>
<script type="module">
    import { client } from "@gradio/client";
    
    async function loaded(reader) {
        const results = document.getElementById('results');
        
        try {
            // Connect to the Hugging Face Gradio space
            const app = await client("https://huggingface.co/spaces/shoaib-akther/Food_recognition");

            // Send the image data to the API
            const response = await app.predict("/predict", [reader.result]);

            // Extract the label and display the result
            const label = response['data'][0]['label'];
            results.innerHTML = `<br/><img src="${reader.result}" width="500"> <p>${label}</p>`;
        } catch (error) {
            results.innerHTML = `<p>Error occurred: ${error.message}. Please try again later.</p>`;
            console.error('Error details:', error);
        }
    }

    function read() {
        const photo = document.getElementById('photo');
        const reader = new FileReader();
        reader.addEventListener('load', () => loaded(reader));
        reader.readAsDataURL(photo.files[0]);
    }

    const photo = document.getElementById('photo');
    photo.addEventListener('input', read);
</script>
